<head>
  <title>statistics</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
</head>
<body>
  <h1>STATISTICS</h1>

  <a href="/index">home</a>
  <a href="/statistics">statistics</a>
  <% if (user) { %>
    <a href="/auth/logout">logout</a>
  <% } else { %>
  <a href="/auth/login">login</a>
  <a href="/auth/signup">signup</a>
  <% } %>

  <p><%= hello %></p>

  <% result.reverse() %>
  <% for (let i=0; i<result.length; i++){ %>
  <p><%= result[i].usercount %> <%= result[i].usertime %></p>
  <% } %>

  <div class="chart-container" style="position: relative; height:40vh; width:80vw">
    <canvas id="myChart"></canvas>
  </div>

  <script>
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: <%- JSON.stringify(labels); %>,
    datasets: [{
        data: <%- JSON.stringify(data); %>,
        label: "USECOUNT",
        borderColor: "#F77D17",
        fill: true,
        lineTension:0.15
      }
    ]
  },
  options: {
    title: {
      display: true,
      text: '텀블러 사용량'
    },
    tooltips: {
      mode: 'index',
      intersect: false,
    },
    hover: {
      mode: 'nearest',
      intersect: true
    },
    scales: {
      xAxes: [{
        display: true,
        scaleLabel: {
          display: true,
          labelString: 'Day'
        }
      }],
      yAxes: [{
        display: true,
        scaleLabel: {
          display: true,
          labelString: 'Value'
        }
      }]
    },
      animation: {
          duration: 1000
      }
  }
});

  </script>


</body>
